<%- include('./components/header') %>
<body>
    <%- include('./components/navigation') %>

    <div class="container" style="margin-top: 10px;">
        <div class="row">
            <form id="update_form" method="post" action="/functions/edit_category/<%= category.id %>">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-2"><img src="<%= category.CategoryMainImage %>" style="width: 100px;" > </div>
                            <div class="col-lg-4">
                                <label class="form-lable">Category name</label>
                                <input type="text" name="CategoryName" value="<%= category.CategoryName%>" class="form-control">
                            </div>
                            <div class="col-lg-4">
                                <label class="form-lable">Category image</label>
                                <input type="text" name="CategoryMainImage" value="<%= category.CategoryMainImage%>" class="form-control">
                            </div>
                            <div class="col-lg-2">
                                <button style="margin-top: 30px;" form="update_form" type="submit" class="btn btn-primary">Update</button>
                            </div>
                        </div>
                    </div>
            </form>
        </div>
        <hr color="blue" size="10px">
            <div class="row">
                <div class="col-lg-3">
                    <h5>Change Category</h5>
                    <form id="add_product_form" action="/functions/add_category" method="POST">
                        <select class="form-select" aria-label="Default select example">
                            <% for(let item of categories) {%>
                                <option value="<%= item.id %>"><%= item.CategoryName %></option>
                            <% } %>
                          </select>
                    </form>
                    <h5>Add product</h5>
                    <form id="add_product_form" action="/functions/add_product" method="POST">
                        <label class="form-label">Product Name</label>
                        <input type="text" name="productName" class="form-control">
                        <label class="form-label">Product Image</label>
                        <input type="text" name="productMainImage" class="form-control">
                        <label class="form-label">Product Price</label>
                        <input type="text" name="productPrice" class="form-control">
                        <label class="form-label">unit In Stock</label>
                        <input type="text" name="unitInStock" class="form-control">
                        <label class="form-label">Available</label>
                        <select name="isAvailable" class="form-select" aria-label="Default select example">
                                <option value="true">True</option>
                                <option value="false">false</option>
                          </select>
                        <label class="form-label">Product Category</label>
                        <select class="form-select"  name="categoryId" aria-label="Default select example">
                            <% for(let item of categories) {%>
                                <option value="<%= item.id %>"><%= item.CategoryName %></option>
                            <% } %>
                          </select>

                        
                        <button form="add_product_form" type="submit" class="btn btn-primary" style="width: 100%; margin-top: 12px;">Create New Product</button>
                    </form>
                </div>
                <div class="col-lg-9">
                    <% if(products.length>0) {%>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>product Image</th>
                                    <th>product Name</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% for(let product of products){%>
                                    <tr>
                                        <td><%= product.id %></td>
                                        <td><a href="/products/<%= product.id %>"><img src="<%= product.productMainImage %>" alt="" style="height: 50px;"></a></td>
                                        <td ><a href="/products/<%= product.id %>"><%= product.productName %></a></td>
                                        <td> <%= product.productPrice %></td>
                                        <td>
                                            <form action="delete_category" method="post"></form>
                                            <a href="/delete_product/<%= product.id %>" class="btn btn-danger">Delete</a>
                                            <a href="/functions/edit_product/<%= product.id %>" class="btn btn-warning">Edit</a>
                                        </td>
                                    </tr>
                                <%} %>
                        </table>
                    <% }else{ %>
                    <% } %>
                </div>
        </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>